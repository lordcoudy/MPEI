#!/usr/bin/env python
# coding: utf-8

# In[1]:


pip install web3


# In[2]:


pip install eth-brownie


# In[3]:


import json 


# In[4]:


from web3 import Web3 


# In[5]:


ganache_url = "HTTP://127.0.0.1:8545"


# In[6]:


web3 = Web3 (Web3.HTTPProvider(ganache_url))


# In[7]:


web3.isConnected() 


# In[8]:


web3.eth.defaultAccount 


# In[9]:


web3.eth.accounts[0]


# In[12]:


abi = json.loads('[{\"constant\":false,\"inputs\":[],\"name\":\"enter\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"pickWinner\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"constant\":true,\"inputs\":[],\"name\":\"getBalance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getPlayers\",\"outputs\":[{\"internalType\":\"addresspayable[]\",\"name\":\"\",\"type\":\"address[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"manager\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"players\",\"outputs\":[{\"internalType\":\"addresspayable\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"random\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}]') 


# In[13]:


byteCode= '608060405234801561001057600080fd5b50336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550610652806100606000396000f3fe6080604052600436106100705760003560e01c80635ec01e4d1161004e5780635ec01e4d1461010e5780638b5b9ccc14610139578063e97dcb62146101a5578063f71d96cb146101af57610070565b806312065fe014610075578063481c6a75146100a05780635d495aea146100f7575b600080fd5b34801561008157600080fd5b5061008a61022a565b6040518082815260200191505060405180910390f35b3480156100ac57600080fd5b506100b5610249565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561010357600080fd5b5061010c61026e565b005b34801561011a57600080fd5b506101236103f0565b6040518082815260200191505060405180910390f35b34801561014557600080fd5b5061014e610492565b6040518080602001828103825283818151815260200191508051906020019060200280838360005b83811015610191578082015181840152602081019050610176565b505050509050019250505060405180910390f35b6101ad610520565b005b3480156101bb57600080fd5b506101e8600480360360208110156101d257600080fd5b810190808035906020019092919050505061059b565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b60003073ffffffffffffffffffffffffffffffffffffffff1631905090565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610330576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260118152602001807f596f7520617265206e6f74206f776e657200000000000000000000000000000081525060200191505060405180910390fd5b60006001805490506103406103f0565b8161034757fe5b0690506001818154811061035757fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc3073ffffffffffffffffffffffffffffffffffffffff16319081150290604051600060405180830381858888f193505050501580156103de573d6000803e3d6000fd5b50600160006103ed91906105d7565b50565b60004442600160405160200180848152602001838152602001828054801561046d57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311610423575b505093505050506040516020818303038152906040528051906020012060001c905090565b6060600180548060200260200160405190810160405280929190818152602001828054801561051657602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190600101908083116104cc575b5050505050905090565b662386f26fc10000341161053357600080fd5b60013390806001815401808255809150509060018203906000526020600020016000909192909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b600181815481106105a857fe5b906000526020600020016000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b50805460008255906000526020600020908101906105f591906105f8565b50565b61061a91905b808211156106165760008160009055506001016105fe565b5090565b9056fea265627a7a7231582036b8d6a3ad51fa2e0f6b0e6fd3b6997b807d512632c293426f2a7c9fea0761b964736f6c63430005110032'


# In[14]:


Lottery = web3.eth.contract(abi=abi, bytecode = byteCode)


# In[17]:


print(contract.functions.getPlayers().call())


# In[16]:


contract = web3.eth.contract(address='0x96ffeb41d3Cac7e07D414f2F2EaC2ABD04fA6139', abi = abi)


# In[20]:


tx_hash = contract.functions.enter().transact( {'from': web3.eth.accounts[2], 'value' : 300000000000000000 } )


# In[21]:


tx_hash


# In[22]:


tx_receipt = web3.eth.waitForTransactionReceipt(tx_hash)


# In[23]:


balance = web3.eth.getBalance('0x96ffeb41d3Cac7e07D414f2F2EaC2ABD04fA6139')


# In[24]:


balance


# In[ ]:





# In[25]:


url = "http://194.59.40.99:8545/"


# In[26]:


web3 = Web3 (Web3.HTTPProvider(url))


# In[27]:


web3.isConnected()


# In[28]:


byteCode= '608060405234801561001057600080fd5b50336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550610652806100606000396000f3fe6080604052600436106100705760003560e01c80635ec01e4d1161004e5780635ec01e4d1461010e5780638b5b9ccc14610139578063e97dcb62146101a5578063f71d96cb146101af57610070565b806312065fe014610075578063481c6a75146100a05780635d495aea146100f7575b600080fd5b34801561008157600080fd5b5061008a61022a565b6040518082815260200191505060405180910390f35b3480156100ac57600080fd5b506100b5610249565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561010357600080fd5b5061010c61026e565b005b34801561011a57600080fd5b506101236103f0565b6040518082815260200191505060405180910390f35b34801561014557600080fd5b5061014e610492565b6040518080602001828103825283818151815260200191508051906020019060200280838360005b83811015610191578082015181840152602081019050610176565b505050509050019250505060405180910390f35b6101ad610520565b005b3480156101bb57600080fd5b506101e8600480360360208110156101d257600080fd5b810190808035906020019092919050505061059b565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b60003073ffffffffffffffffffffffffffffffffffffffff1631905090565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610330576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260118152602001807f596f7520617265206e6f74206f776e657200000000000000000000000000000081525060200191505060405180910390fd5b60006001805490506103406103f0565b8161034757fe5b0690506001818154811061035757fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc3073ffffffffffffffffffffffffffffffffffffffff16319081150290604051600060405180830381858888f193505050501580156103de573d6000803e3d6000fd5b50600160006103ed91906105d7565b50565b60004442600160405160200180848152602001838152602001828054801561046d57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311610423575b505093505050506040516020818303038152906040528051906020012060001c905090565b6060600180548060200260200160405190810160405280929190818152602001828054801561051657602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190600101908083116104cc575b5050505050905090565b662386f26fc10000341161053357600080fd5b60013390806001815401808255809150509060018203906000526020600020016000909192909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b600181815481106105a857fe5b906000526020600020016000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b50805460008255906000526020600020908101906105f591906105f8565b50565b61061a91905b808211156106165760008160009055506001016105fe565b5090565b9056fea265627a7a7231582036b8d6a3ad51fa2e0f6b0e6fd3b6997b807d512632c293426f2a7c9fea0761b964736f6c63430005110032'


# In[ ]:




