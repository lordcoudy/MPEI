0) Так как потребуется обработка внешних прерываний, то сперва необходимо
настроить stack

LDI R20, 127
OUT SPL, R20

1) Необходимо сконфигурировать линии порта PD
PD3 (Fs - начало преобразования в АЦП)
и PD4 (RVx - считывание из АЦП полученных цифровых данных) на выход:

LDI R16, 0b00011000 	(PD3 и PD4 - подаются 1, чтобы были выходами)
OUT DDRD, R16 			(отправляем в регистр направления порта D)
OUT PortD, R16			(изначально PD3 и PD4 = 1)

сконфигурировать порт PB на вход (для приема данных с АЦП):

LDI R16, 0b00000000 	(все 0, чтобы были входами)
OUT DDRB, R16 			(отправляем в регистр направления порта B)

2)Необходимо разрешить внешнее прерывание INT0
IN R17, GIMSK
ORI R17, 0b01000000 	(6ой бит - разрешение прерывания INT0)
OUT GIMSK, R17

IN R17, MCUCR
ORI R17, 0b00000010 	(последние 2 бита - настройка активного сигнала INT0)
						(здесь нам хочется по заднему фронту)
OUT MCUCR, R17

3) Для соблюдения заданных временных интервалов (периодичность опроса АЦП
и удержание низкого уровня сигнала WR заданный промежуток времени) необходимо
использовать оба таймера: 8-разрядный для WR, 16-разрядный для периода опроса:

IN R17, TIMSK
ORI R17, 0b01000010 	(6ой бит - разрешение прерывания таймера 1 по сравнению)
						(1ый бит - разрешение прерывания таймера 0 по переполнению)
OUT TIMSK, R17

Таймер 0 8-разрядный => считает 255 тактов (при коэф. деления = 1 имеем 63,75мкс,
что в разы больше требуемого, при коэф. деления 1024 имеем 65,28мс), значит
необходимо внести начальное значение для таймера 0 такое, чтобы отсчет от этого
начального значения до переполнения составлял от 12 мкс до 13 мкс
(12мкс/250нс=48 тактов, т.е. начальное значение 255-47=208)

LDI R17, 208
OUT TCNT0, R17

Таймер 1 настроен на режим прерывания по сравнению => нужно в регистрах TCNT1H:TCNT1L установить
значение с которым хотим сравнивать текущее значение таймера

LDI R17, 0
OUT TCNT1H, R17			(предварительно обнуляем содержание TCNT1H)
OUT TCNT1L, R17			(предварительно обнуляем содержание TCNT1H)
OUT TCCR1A, R17			(?обнуляем TCCR1A, чтобы отключить таймер от вывода OC1?)

LDI R18, 0				(период опроса АЦП 512*V=512*20=10240 ТАКТОВ = 2800h)
LDI R19, 0x28
OUT OCR1AH, R19
OUT OCR1AL, R18

Перед запуском таймера следует разрешить прерывания (флаг 7 регистра SREG)

BSET 7

Запускаем таймер 1

LDI R17, 1				(коэф. деления = 1)
OUT TCCR1B, R17
OUT TCCR0, R17

4) Когда придет прерывание от ТАЙМЕРА 1 (по сравнению), т.е. через 512*V тактов, сбросим вывод PD3
и запустим ТАЙМЕР 0 (OUT TCCR0, R17), выходим из прерывания (reti). Когда придет прерывание от
ТАЙМЕРА 0, уставим вывод PD3, остановим работу ТАЙМЕРА 0

LDI R17, 0
OUT TCCR0, R17

И установим начальное значение для следующего запуска таймера 0 по приходу прерывания таймера 1

LDI R17, 208
OUT TCNT0, R17